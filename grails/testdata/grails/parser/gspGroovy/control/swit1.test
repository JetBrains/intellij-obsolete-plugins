<%
def k = 2
switch (k) {
case 2:
%>
<%
println "medved!"%> <%%>;; <%=3%> <% println "preved"
}
%>
-----
GspGroovyDummyHolder
  GspClass
    GspRunMethod
      GspRunBlock
        PsiElement(JSCRIPT_BEGIN)('<%')
        PsiElement(new line)('\n')
        Variable definitions
          Modifiers
            PsiElement(def)('def')
          PsiWhiteSpace(' ')
          Variable
            PsiElement(identifier)('k')
            PsiWhiteSpace(' ')
            PsiElement(=)('=')
            PsiWhiteSpace(' ')
            Literal
              PsiElement(Integer)('2')
        PsiElement(new line)('\n')
        Switch statement
          PsiElement(switch)('switch')
          PsiWhiteSpace(' ')
          PsiElement(()('(')
          Reference expression
            PsiElement(identifier)('k')
          PsiElement())(')')
          PsiWhiteSpace(' ')
          PsiElement({)('{')
          PsiWhiteSpace('\n')
          Case section
            PsiElement(case)('case')
            PsiWhiteSpace(' ')
            Expression list
              Literal
                PsiElement(Integer)('2')
            PsiElement(:)(':')
            PsiElement(new line)('\n')
            PsiElement(JSCRIPT_END)('%>')
            Outer: GSP TEMPLATE STATEMENTS('\n')
            PsiElement(JSCRIPT_BEGIN)('<%')
            PsiElement(new line)('\n')
            Call expression
              Reference expression
                PsiElement(identifier)('println')
              PsiWhiteSpace(' ')
              Command arguments
                Literal
                  PsiElement(double quoted string)('"medved!"')
            PsiElement(JSCRIPT_END)('%>')
            Outer: GSP TEMPLATE STATEMENTS(' ')
            PsiElement(JSCRIPT_BEGIN)('<%')
            PsiElement(JSCRIPT_END)('%>')
            Outer: GSP TEMPLATE STATEMENTS(';; ')
            PsiElement(JEXPR_BEGIN)('<%=')
            Groovy Expression Injection
              Literal
                PsiElement(Integer)('3')
            PsiElement(JEXPR_END)('%>')
            Outer: GSP TEMPLATE STATEMENTS(' ')
            PsiElement(JSCRIPT_BEGIN)('<%')
            PsiWhiteSpace(' ')
            Call expression
              Reference expression
                PsiElement(identifier)('println')
              PsiWhiteSpace(' ')
              Command arguments
                Literal
                  PsiElement(double quoted string)('"preved"')
            PsiElement(new line)('\n')
          PsiElement(})('}')
        PsiElement(new line)('\n')
        PsiElement(JSCRIPT_END)('%>')